[![Discord Mine](https://img.shields.io/discord/807380182729228298?label=chat&logo=discord&logoColor=white)](https://discord.gg/VYZuWRMQ8u)

# AnarchyExploitFixes

Fix exploits on a Minecraft Anarchy Server

[![bstats](https://bstats.org/signatures/bukkit/AnarchyExploitFixes.svg)](https://bstats.org/plugin/bukkit/AnarchyExploitFixes/8700)

## Requirements

* ProtocolLib - This is for preventing packet exploits, if it's not present these exploits will not be prevented.

## Prebuilt jar

Go to releases, download the latest jar
<br> If you wish to have a prebuilt BETA jar with the latest code, click Actions at the top of the page, click the
latest build, and download the artifact

## Building from source

Run `mvn package`

## Servers using AEF:

Hisparquia.org (150-300), constantiam.net (70-80), 5b5t.org (50-150), 8b8t.xyz (10-50), 10b10t.org (5-20), 1b1t.tk (
5-15)

## Commands

These commands are only able to be executed by console or opped players.

* /aef reload - Reload the config
* /aef kickphrase (phrase) - Kick all players that have said these words.
* /aef newchunks - See how many newchunks people are loading.
* /aef oldchunks - See how many old chunks people are loading.
* /aef geared - See how many players have armor or are new.
* /aef elytra - See who is flying on an elytra.

## Donate
You can send bitcoin to `3DJan1GpSkhiWHYec55xKhchZC8NeC829S`
## Contact
Need to let me know of any exploits in private? Contact me on discord: moo#0529
## Config options

Missing config options after an update? Reset your config or manually add the options.
<details>
  <summary>config.yml</summary>

```yml
NoConsoleOutput: false
DEBUG: false

#Illegal block preventions
PreventPlacingIllegalBlocks: true
RemoveIllegalBlockOnPlace: true
RemoveIllegalBlocksOnInteract: true
RemoveIllegalBlocksOnJoin: true
RemoveIllegalBlocksOnInventoryOpen: true
RemoveIllegalBlocksOnDrop: true
RemoveIllegalBlocksOnClick: true
RemoveIllegalBlocksOnPickup: true
RemoveIllegalBlocksOnMove: true
#Remove illegal blocks on chunkload, useful if players have placed a lot of bedrock/other blocks and you want to get rid of it
RemoveALLIllegalBlocksOnCHUNKLOAD: false
RevertStackedItems: true
# Check for items every X time may cause lag, disable if you have lag issues
StrictIllegalPrevention: false

#Bugfixes
PreventEndGatewayCrashExploit: true
PreventDispenserCrashExploit: true
PreventSnowBallExploit: true
PreventCraftingRecipeLagExploit: true
PreventDestroyingEndPortals: true
PreventPortalTraps: true
FillInBedrockFloor: true
FillInBedrockRoof: true
PreventGoingBelowBedrockFloor: true
DisableAllElytras: false
DisableWithers: false
DisableExplosions: false
FixChatcoIgnoreBug: true
FixWorldStatsCommandBug: true
# Attempt to prevent chunk bans/fps lag.
PreventChunkBan: true
MaxEnchantmentTablePerChunk: 16
MaxEnderchestPerChunk: 64
MaxContainerPerChunk: 1000
MaxSignPerChunk: 100
# Antispam time in seconds
AntiSpamTime: 1
AntiSpamWordTime: 60
AntiSpamLinkTime: 300
PreventUnicodeDot: true

#Dupe preventions
DisableChestsOnDonkeys: false
PreventDonkeysFromGoingThroughPortals: false

# Other options
MaskKickMessages: false
PreventSpamKick: false
#Code by John200410, edited by moomoo
Preventlinks: false
Replace@: false
GrayJoinLeaveMessages: false
JoinMessage: "joined the game."
LeaveMessage: "left the game."
# COMMAND WHITELIST
# This will make it pretty much impossible to find your plugins as only the commands you specify will be able to work. Any other commands will show "Bad command. Type /help for all commands."
CommandWhitelist: false
AllowOPStobypass: true
CommandsWhitelisted:
  - /help
  - /msg
  - /kill
  - /discord
  - /togglechat
  - /toggletells
  - /ignore
  - /ignorelist
  - /toggledeathmsg
  - /stats
  - /tps
  - /w
  - /m
  - /t
  - /pm
  - /tell
  - /whisper
  - /r
  - /reply

BannedWords:
  - "what's 2+2"

# Specific Elytra speed settings for ONLY NEW and OLD chunks (set nocheatplus elytra settings to 999999)
# Disable by setting to 999999
ElytraOldChunkSpeed: 1.81 # 130km/h
ElytraNewChunkSpeed: 1.81 # 130km/h

# Burst elytra speed settings, if the tps is above the amount it will use these settings.
EnableBursting: true
ElytraBurstOldChunkSpeed: 5
ElytraBurstOldChunkTPS: 18
ElytraBurstNewChunkSpeed: 3.12 # 223km/h
ElytraBurstNewChunkTPS: 19

# Show some info on the actionbar while flying with elytra.
ElytraActionBar: true

# Patches the future/rusherhack/kamiblue 2b2t elytra fly exploit
PatchPacketElytraFly: false
# Recommended to not go lower as there could be false positives.
MaxElytraOpensPer10Seconds: 25 # Will only allow players to go about 85km/h on kami blue, and won't even work on rusherhack.

# Patch future/rusher packet fly
PreventPacketFly: true
# Max teleport packets per 10 seconds, this is how the packet fly works, 25 is usually fine, if you go lower players may get stuck.
MaxTeleportPacketsPer10Seconds: 25
LogPacketFlyEvents: false

# Patch futureclient boat fly exploit
# This does not affect boats at all! Even on land.
BoatflyPatch: true
MaxEntityPacketsPer10Seconds: 15
LogBoatFlyEvents: true

# Don't enable this, its shit
# This affects boats on land and other things.
LegacyBoatFlyPatch: false

#List of banned blocks.
#WARNING: ADDING MOB SPAWNER TO THIS LIST WHILE HAVING RemoveALLIllegalBlocksOnCHUNKLOAD ENABLED WILL REMOVE ALL MOB SPAWNERS IN YOUR WORLD.
#You can also add non blocks and they should get removed aswell.
BANNED_BLOCKS:
  - BEDROCK
  - BARRIER
  - COMMAND
  - STRUCTURE_BLOCK
  - MONSTER_EGG

OnlyRevertStacksForCertainItems: false
RevertStackedItemsList:
  - TOTEM
#The item banned blocks are replaced with.
Replacement_Item: STONE

# No need to mess with these they are meant for my server
# 1b1t options
AllowBreakingBedrock: false
1b1tPlaceBedrock: false
UseSparkhealth: false
nickresetonly: false
5000blocksawaytoteleport: false
# This will only allow walking on the nether roof. Use permission node anarchyexploitfixes.netherroofbypass to bypass
PreventNetherRoof: false
#Enable the shitty 1b1t slow! dupe - 5% chance of duplicating items by punching an item frame.
SlowDupe: false

DisableNCPGeyser: false
BypassSlots: false

# DISABLE STUFF AT CERTAIN TPS
# SET TO -1 TO DISABLE.
Redstone: 16

Elytra: 13
# Removes the elytra from the player's chestplate slot, there is no need to do this as this will make players fall to their death once tps is low.
RemoveElytra: false

Explosions: 17

FallingBlocks: 19
```

</details>

## Missing features

* Modified god mode patch - Was removed because the original code was so shit that when reloaded with plugman all the
  players will get kicked, aswell as breaking support for anything other than 1.12.2. Please use my standalone plugin
  for this (1.12.2 only): https://github.com/moom0o/AntiGodMode
  
## Probably won't be added
* Auto-updater, because you shouldn't trust me and instead read the code yourself.